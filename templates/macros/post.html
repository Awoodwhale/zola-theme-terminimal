{% macro content(page, summary, show_only_description) %}
{%- if show_only_description %}
<div class="post-content">
    {{ page.description | safe }}
</div>
{% elif summary and page.summary %}
<div class="post-content">
    {{ page.summary | safe }}
</div>
<div>
    <!-- &#xFE0E; -- force text style - some devices render this as emoji -->
    <a class="read-more" style="text-decoration: none;padding: 5px;margin: 5px 0;" href="{{ page.permalink | safe }}">
        <b><span class="button__text" style="font-style: italic;">Read More</span>&nbsp;</b>
        <span class="button__icon">&#8617;&#xFE0E;</span>
    </a>
</div>
{% else %}
{#- full content -#}

<div class="toc-container"><div class="toc"></div></div>
<style>.toc-container {
    width: 200px;
    height: auto;
    z-index: 114;
    background-color: var(--background);
    transform: translateX(0);
    right: calc((100% - 950px - 250px) / 2);
    position: fixed;
    top: 25%;
}
.toc-container .is-active-link {
    color: var(--accent);
    font-weight: 1000;
}

.toc-container ol li::marker  {
    content: "# " !important;
    color: var(--accent);
}
.toc-container ol li a {
    text-decoration: none;
}
.toc-container ol li a:hover {
    color: var(--accent);
}</style>
<div class="post-content" id="uniq-post-content">
    {{ page.content | safe }}
</div>
<script>
tocbot.init({
    tocSelector: '.toc',
    contentSelector: '.post-content',
    headingSelector: 'h1, h2, h3, h4, h5',
    positionFixedSelector: ".toc",
}) && new Viewer(document.getElementById('uniq-post-content'), {
    navbar: false,
    loop: false,
    title: false,
})
</script>
{%- endif %}
{% endmacro content %}


{% macro date(page) %}
<span class="post-date">
    {%- if page.date %}
    {{ page.date | date(format="%Y-%m-%d") }}
    {% endif -%}
</span>
{% endmacro post_date %}


{% macro earlier_later(page) %}
{%- if config.extra.enable_post_view_navigation and page.lower or page.higher %}
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">{{ config.extra.post_view_navigation_prompt }}</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        {%- if page.higher %}
        <span class="button previous">
            <a href="{{ page.higher.permalink | safe }}">
                <span class="button__icon">←</span>&nbsp;
                <span class="button__text">{{ page.higher.title }}</span>
            </a>
        </span>
        {% endif %}
        {% if page.lower %}
        <span class="button next">
            <a href="{{ page.lower.permalink | safe }}">
                <span class="button__text">{{ page.lower.title }}</span>&nbsp;
                <span class="button__icon">→</span>
            </a>
        </span>
        {% endif -%}
    </div>
</div>
{% endif -%}
{% endmacro earlier_later %}


{% macro header(page) %}
<h1 class="post-title"><b><a href="{{ page.permalink | safe }}">{{ page.title }}</a></b></h1>
<div class="post-meta-inline">
    {{ post_macros::date(page=page) }}
</div>

{{ post_macros::tags(page=page) }}
{% endmacro header %}


{% macro list_posts(pages) %}
<ul>
    {%- for page in pages %}
    {%- if page.draft %}
    {% continue %}
    {% endif -%}
    <li class="post-list">
        <a href="{{ page.permalink | safe }}">
            <span class="post-date">{{ page.date }}</span>
            :: <span class="post-list-title">{{ page.title }}</span></a>
        {{ post_macros::tags(page=page, short=true) }}
    </li>
    {% endfor -%}
</ul>
{% endmacro list_posts %}


{% macro tags(page, short=false) %}
{%- if page.taxonomies and page.taxonomies.tags %}
<span class="post-tags-inline">
    {%- if short %}
    ::
    {%- set sep = "," -%}
    {% else %}
    :: tags ::&nbsp;
    {%- set sep = "&nbsp;" -%}
    {% endif -%}
    {%- for tag in page.taxonomies.tags | sort | unique(case_sensitive=false) %}
    <a class="post-tag" href="{{ get_taxonomy_url(kind='tags', name=tag) | safe }}">#{{ tag }}</a>
    {%- if not loop.last %}{{ sep | safe }}{% endif -%}
    {% endfor -%}
</span>
{% endif -%}
{% endmacro tags %}